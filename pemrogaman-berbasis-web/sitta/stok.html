<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informasi Bahan Ajar</title>
    <link rel="stylesheet" href="./css/style.css">
    <style>
        main {
            display: flex;
            flex-direction: column;
            gap: 40px;
            margin: 50px auto;
            max-width: 1024px;
        }

        #data {
            display: flex;
						flex-wrap: wrap;
            gap: 40px;
        }

        .data {
            display: flex;
            flex-direction: column;
            padding: 10px 20px 20px;
            gap: 20px;
            border: 1px solid var(--secondary);
						box-shadow: 6px 6px var(--secondary);
            background-color: var(--white);
						max-width: 280px;
        }

				.data .remove {
					aspect-ratio: 1;
					align-self: end;
					background-color: #f44336;
				}

				.data .remove:hover {
					scale: 1.1
				}


        .data p {
            font-size: 14px;
        }

        .data img {
            width: 100%;
            align-self: center;
        }
				
				.data .data-detail {
					display: flex;
					flex-direction: column;
					gap: 8px;
				}

        @media screen and (max-width: 768px) {
            main {
                padding: 10px;
            }
            
            #data {
                grid-template-columns: auto;
            }

            .data img {
                width: 100%;
            }
        }

        .form {
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 20px;
            background-color: var(--white);
        }
				.form .cover {
					width: 400px;
					height: 500px;
					background-size: cover;
				}
				.filter {
					display: flex;
					align-items: center;
					gap: 20px;
					align-self: flex-end;
				}
				.filter .filter-section {
					display: flex;
					align-items: center;
					gap: 10px;
				}
				.stok {
					display: flex;
					gap: 10px;
				}
				.stok input {
					width: 100%;
				}
				.stok .status-stok {
					padding: 0px 10px;
					display: flex;
					justify-content: center;
					align-items: center;
				}
				.catatan {
					width: 100%;
					padding: 5px;
					border: 1px solid black;
					background-color: 10px;
				}
    </style>
		<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
	<nav>
			<ul>
					<li><a href="./dashboard.html">Dashboard</a></li>
					<li><a href="./stok.html" class="active">Informasi Bahan Ajar</a></li>
					<li><a href="./tracking.html">Tracking Pengiriman</a></li>
					<li>
							<a>Laporan</a>
							<ul>
									<li><a href="#">Monitoring Progress DO Bahan Ajar</a></li>
									<li><a href="#">Rekap Bahan Ajar</a></li>
							</ul>
					</li>
					<li><a href="#">Histori Transaksi Bahan Ajar</a></li>
					<span id="time">{{time}}</span>
					<li><a id="logout" @click="logout">Logout</a></li>
			</ul>
	</nav>
	<div id="app">
    <main>
				<section class="filter">
					<div class="filter-section">
						<label>Filter</label>
						<select name="filterList" v-model="filterBy">
							<option value="" disabled>Pilih</option>
							<option value="upbjj">UT Daerah</option>
							<option value="kategori">Kategori mata kuliah</option>
						</select>
						<select name="filterOptions" v-model="filter" v-if="filterBy">
							<option value="">Pilih</option>
							<option	v-for="op in filterOptions">{{op}}</option>
						</select>
					</div>
					<div class="filter-section">
						<label>Urutkan</label>
						<select name="kategori" v-model="sort">
							<option value="asc">A - Z</option>
							<option value="desc">Z - A</option>
						</select>
					</div>
					<button type="button" class="btn-red" @click="handleResetFilter" v-if="filterBy">Atur ulang</button>
				</section>
				<section class="filter">
					<button type="button" @click="()=> mode = 'insert'" v-if="isNormalMode">Mode ubah</button>
					<button type="button" class="btn-secondary" @click="handleAppendData" v-if="isInsertMode">Tambah</button>
					<button type="button" class="btn-red" @click="()=> mode = 'normal'" v-if="isInsertMode">Mode Lihat</button>
				</section>

				<section id="data">
					<div v-for="(v) in filteredBahanAjar" class="data" v-if="bahanAjar.length" :key="v.i">
						<button class="remove" @click="()=> handleRemove(v)" v-if="isInsertMode">
							X
						</button>
						<div class="data-detail">
							<p>Kode Lokasi</p>
							<input type="text" name="kode" v-model="bahanAjar[v.i].kode" :disabled="isNormalMode">
							<p>Judul</p>
							<input type="text" name="judul" v-model="bahanAjar[v.i].judul" :disabled="isNormalMode">
							<p>Kategori</p>
							<select name="kategori" v-model="bahanAjar[v.i].kategori" :disabled="isNormalMode">
								<option	v-for="op in kategoriList">{{op}}</option>
							</select>
							<p>UT Daerah</p>
							<select name="upbjj" v-model="bahanAjar[v.i].upbjj" :disabled="isNormalMode">
								<option	v-for="op in upbjjList">{{op}}</option>
							</select>
							<p>Lokasi Rak</p>
							<input type="text" name="lokasiRak" v-model="bahanAjar[v.i].lokasiRak" :disabled="isNormalMode">
							<p>Stok</p>
							<input type="text" name="qty" v-model="bahanAjar[v.i].qty" :disabled="isNormalMode">
							<p>Safety Stok</p>
							<div class="stok">
								<input type="text" name="safety" v-model="bahanAjar[v.i].safety" :disabled="isNormalMode">
								<span class="status-stok" v-text="v.status"
									:style="{color: 'rgba(0,0,0,.5)', backgroundColor: colorStatus[v.status] }"></span>
							</div>
							<p>Catatan</p>
							<div v-if="v.catatanHTML || isInsertMode">
								<textarea class="catatan" v-model="bahanAjar[v.i].catatanHTML" v-if="isInsertMode"></textarea>
								<div class="catatan" v-html="bahanAjar[v.i].catatanHTML" v-if="isNormalMode"></div>
							</div>
							<span v-else>-</span>
						</div>
					</div>
					<div v-else>
						Data Tidak ditemukan
					</div>
				</section>
    </main>

		<footer>Tugas 1 Pemograman berbasis web - Universitas Terbuka &copy; 2025</footer>
	</div>
	<script src="./js/script.js"></script>
	<script src="./js/data.js"></script>
	<script src="./js/stok-app.js"></script>
</body>
</html>